<!DOCTYPE html>
<meta charset="utf-8">


<!-- load the plotly.js and math.js libraries -->      

<head>
  <title> Kuwait COVID-19 Forecasts </title>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-53592269-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-53592269-3');
</script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://unpkg.com/mathjs@6.6.1/dist/math.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://d3js.org/d3.v5.min.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>



<style> /* set the CSS */
body { 
  margin-left: 20px;
}
.p_class { 
  margin-top: 20px;
  margin-left: 20px;
  margin-right: 20px;
  border: 1px solid black ;
}
/* hides the svg dom element that has the click handler responsible for toggling */
#plotdiv .legend .traces:nth-of-type(1) .legendtoggle {
   display: none;
}
/* just for presentation: shows the default cursor insted of the text cursor */
#plotdiv .legend .traces:nth-of-type(2) .legendtext {
   cursor: default;
}
</style>


</head>




<body>



<p class = "p_class"> Updated June 3, 2020. 
  Click the legend on the right to remove or display each forecast. 
</p>



<div class="plot" id="plotdiv">

</div>








<script>




function unique ( array ) {
    return array.filter(function(a){
        return !this[a] ? this[a] = true : false;
    }, {});
}



function makeplot() {
   Plotly.d3.csv("true_deaths_processed.csv", function(data1){ 
    Plotly.d3.csv("death_forecasts.csv", function(data2){ 
      processData(data1,data2)
      });
    });
};

//https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/ecdc/total_cases_per_million.csv

  
function processData(data1, data2) {
  var dates = [];
  var total_count = [];
  var locations = d3.keys(data1[0])
  date_name = locations[0] 
  death_name = locations.slice(1,locations.length+1);
  for (var i=0; i<data1.length; i++) {
    row = data1[i];
    dates.push( row[date_name] );
    total_count.push(row[death_name])
  }
  //console.log(dates)
  //console.log(total_count)

  var forecast_dates  = [];
  var forecast_titles = [];

  var forecastTitles = d3.keys(data2[0])
 // console.log(forecastTitles)
  date_name = forecastTitles[0];
  forecastTitles = forecastTitles.slice(1,forecastTitles.length+1);
  //console.log(forecastTitles)
  for (var i=0; i<data2.length; i++) {
    row = data2[i];
    forecast_dates.push(row[date_name])
  }
  //console.log(forecast_dates)

  makePlotly(dates,total_count, forecastTitles, forecast_dates, data2);
}

function median(values){
  if(values.length ===0) return 0;

  values.sort(function(a,b){
    return a-b;
  });

  var half = Math.floor(values.length / 2);

  if (values.length % 2)
    return values[half];

  return (values[half - 1] + values[half]) / 2.0;
}


function makePlotly(dates, total_count, forecast_titles, forecast_dates, forecast_data){
  var plotDiv = document.getElementById("plotdiv");





  data = []; 
  var trace1 = {
      x: dates,
      y: total_count,
      name: "Reported",
      mode: 'lines',
      type: 'scatter',
        line: {
     color: 'rgb(0, 0, 0)',
     width: 3
      }
  }
  data.push(trace1);
  //console.log(forecast_data)
  //console.log(forecast_titles)


   for(var i = 0; i<forecast_titles.length; i++){
      curr_title = forecast_titles[i];
      //console.log(curr_title)
      yy = []
      for (var j = 0; j<forecast_data.length; j++){
        row = forecast_data[j];
        //console.log(row[curr_title])
        yy.push(row[curr_title]);
      };
      var trace1 = {
          x: forecast_dates, 
          y: yy,
          name: curr_title,
          mode: 'lines+markers',
          type: 'scatter'
      };
      //console.log(yy)
    // if(yy.length > 1){
        data.push(trace1);
    //  }
   }

   // build the ensemble
   ensemble_y  = [];
   for (var j = 0; j < forecast_data.length; j++){
      row = forecast_data[j]; 
      all_preds = []
      for(var i = 0; i < forecast_titles.length; i++){
        all_preds.push(row[forecast_titles[i]]);
      };
      ensemble_y.push(median(all_preds))
    };
    var trace1 = {
          x: forecast_dates, 
          y: ensemble_y,
          name: "Ensemble",
          mode: 'lines+markers',
          type: 'scatter'
      };
      data.push(trace1);





  var layout = {
    title: {
      text:'COVID-19 Kuwait National Forecasts',
      font: {
        family: 'Arial',
        size: 24
      },
      xref: 'paper',
    },

     legend: {
      //orientation: 'd',
      y: 0.5,
      yref: 'paper',
      font: {
        family: 'Arial',
        size: 15
      },
    bgcolor: '#E2E2E2',
    bordercolor: '#FFFFFF',
    borderwidth: 2
    },
  yaxis: {
    title: {
      text: 'confirmed deaths',
      font: {
        family: 'Arial',
        size: 18,
        color: '#7f7f7f'
      }
    }
  }, 
  shapes: [
  ]
};

  


    val =  { type: 'line',
      x0: dates[dates.length-1],
      y0: 0,
      x1: dates[dates.length-1],
      y1: total_count[total_count.length-1],
      line: {
        color: 'rgb(1, 1, 1)',
        width: 2,
        dash: 'dashdot'
      }
    };
    layout.shapes.push(val)
    //console.log(dates[dates.length-1])







    

   

   Plotly.newPlot(plotDiv, data, layout)

};


// Default with closest countries to Kuwait
//makeplot(["Kuwait", "Bahrain", "United Arab Emirates", "Saudi Arabia", "Qatar", "Oman"]); 
makeplot(["Kuwait"]); 
//findNearest(["Kuwait"])

//selector = document.querySelector('.countrydata');
//console.log(selector)


</script>
</body>



<hr>
Models make various assumptions about levels of social distancing and other interventions. 
See model descriptions below for details. 
We keep track of model performance week-to-week by computing the absolute normalized error of each prediction
against the true number of deaths. 


<hr>


<div class="tablediv" id="tablediv">
</div>

<hr>


<script>
// create the table

var values = [


      [ "Imperial",
 "YYG",
 "LANL",
 "Ensemble",
 "Geneva",
 "Auquan",
 "MIT"],
      [0.004,
 0.035,
 0.091,
 0.091,
 0.104,
 0.13,
 0.339],
]

var headerColor = "grey";
var rowBestColor = "lightblue";
var rowWorstColor = "red";
var rowColor = "white";

var data = [{
  type: 'table',
  header: {
    values: [["<b>Model</b>"], ["<b>Prediction error</b>"]],
        align: "center",
    line: {width: 1, color: 'black'},
    fill: {color: headerColor},
    font: {family: "Arial", size: 13, color: "white"}
  },
  cells: {
    values: values,
    align: "center",
    line: {color: "black", width: 1},
    fill: {color: [[rowBestColor,rowColor,rowColor,rowColor,
              rowColor,rowColor,rowWorstColor]]},
    font: {family: "Arial", size: 12, color: ["black"]}
  }
}]

var layout = {
  title: "Past model prediction accuracy"
}

Plotly.newPlot('tablediv', data, layout);


</script>


<h2><a id="what-forecasts-predict" class="onThisPageAnchor" title="What the Forecasts Aim to Predict"></a>What the Forecasts Aim to Predict</h2>

<p>Forecasts based on statistical or mathematical models aim to predict changes in national level cumulative reported COVID-19 deaths for the next four weeks. Forecasting teams predict numbers of deaths using different types of data (e.g., COVID-19 data, demographic data, mobility data), methods (see below), and estimates of the impacts of interventions (e.g.&nbsp;social distancing, use of face coverings).</p>
<h2><a id="working" class="onThisPageAnchor" title="Working to Bring Together Forecasts for COVID-19 Deaths in Kuwait"></a>Working to Bring Together Forecasts for COVID-19 Deaths in Kuwait</h2>
<p> These forecasts have been developed independently and shared publicly. It is important to bring these forecasts together to help understand how they compare with each other and how much uncertainty there is about what may happen in the upcoming four weeks.</p>



<h3><a href="https://covid19-infection-model.auquan.com/" class="tp-link-policy" data-domain-ext="com">Auquan Data Science<span class="sr-only">external icon</span><span class="fi cdc-icon-external x16 fill-external" aria-hidden="true"></span></a></h3>
<p><strong>Model name:</strong> Auquan</p>
<p><strong>Intervention assumptions:</strong> These projections do not make specific assumptions about which interventions have been implemented or will remain in place.</p>
<p><strong>Methods:</strong> Fitted SEIR model</p>




<h3><a id="imperial-college-london"></a><a href="https://mrc-ide.github.io/covid19-short-term-forecasts/index.html" class="tp-link-policy" data-domain-ext="io">Imperial College, London<span class="sr-only">external icon</span><span class="fi cdc-icon-external x16 fill-external" aria-hidden="true"></span></a></h3>
<p><strong>Model name:</strong> Imperial</p>
<p><strong>Intervention Assumptions: </strong>These projections do not make specific assumptions about which interventions have been implemented or will remain in place.</p>
<p><strong>Methods:</strong> Ensembles of mechanistic transmission models, fit to different parameter assumptions.</p>






<h3><a id="los-alamos-lab"></a><a href="https://covid-19.bsvgateway.org/" class="tp-link-policy" data-domain-ext="org">Los Alamos National Laboratory<span class="sr-only">external icon</span><span class="fi cdc-icon-external x16 fill-external" aria-hidden="true"></span></a></h3>
<p><strong>Model name:</strong> LANL</p>
<p><strong>Intervention assumptions: </strong>This model assumes that currently implemented interventions and corresponding reductions in transmission will continue, resulting in an overall decrease in the growth rate of COVID-19. Over the course of the forecast, the model assumes that the rate of growth will decrease over time.</p>
<p><strong>Methods</strong><br>
Statistical dynamical growth model accounting for population susceptibility</p>


<h3><a id="mit"></a><a href="https://www.covidanalytics.io/projections" class="tp-link-policy" data-domain-ext="io">Massachusetts Institute of Technology<span class="sr-only">external icon</span><span class="fi cdc-icon-external x16 fill-external" aria-hidden="true"></span></a></h3>
<p><strong>Model name: </strong>MIT</p>
<p><strong>Intervention Assumptions:</strong> The projections assume that current interventions will remain in place indefinitely.</p>
<p><strong>Methods: </strong>SEIR model fit to reported death and case counts.</p>




<h3><a id="ucla"></a><a href="https://covid19.uclaml.org/" class="tp-link-policy" data-domain-ext="org">University of California, Los Angeles<span class="sr-only">external icon</span><span class="fi cdc-icon-external x16 fill-external" aria-hidden="true"></span></a></h3>
<p><strong>Model name:</strong> UCLA</p>
<p><strong>Intervention assumptions:</strong> These projections assume that current interventions will not change during the forecasted period.</p>
<p><strong>Methods:</strong> Modified SEIR model</p>



<h3><a id="geneva"></a><a href="https://renkulab.shinyapps.io/COVID-19-Epidemic-Forecasting/" class="tp-link-policy" data-domain-ext="io">University of Geneva / Swiss Data Science Center<span class="sr-only">external icon</span><span class="fi cdc-icon-external x16 fill-external" aria-hidden="true"></span></a></h3>
<p><strong>Model name:</strong> Geneva</p>
<p><strong>Intervention assumptions: </strong>The projections assume that social distancing policies in place at the date of calibration are extended for the future weeks.</p>
<p><strong>Methods</strong><br>
Exponential and linear statistical models fit to the recent growth rate of cumulative deaths.</p>


<h3><a href="http://covid19-projections.com/about/" class="tp-link-policy" data-domain-ext="com">Youyang Gu (COVID-Projections)<span class="sr-only">external icon</span><span class="fi cdc-icon-external x16 fill-external" aria-hidden="true"></span></a></h3>
<p><strong>Model name:</strong> YYG</p>
<p><strong>Intervention assumptions:</strong> The model accounts for reopenings and their impact on infections and deaths.</p>
<p><strong>Methods</strong><br>
SEIS mechanistic model.</p>
</div></div><div class="row "><div class="col-md-12"><div class="row-fluid">
  <div class="vc_empty_space col-12 pb-3"><span class="vc_empty_space_inner"></span></div>
</div>
</div></div></div>







<hr>
      Last updated June 4th, 9:00 PM AST.  
<hr>


   <footer>
      Created by <a href = "https://home.uchicago.edu/~ahmedb/"> Ahmed Bou-Rabee.</a> Please email feedback and suggestions 
      <a href = "mailto: ahmedmb@gmail.com">here</a>.  
    </footer>






