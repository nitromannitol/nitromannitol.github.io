<!DOCTYPE html>
<meta charset="utf-8">
<style> /* set the CSS */
body { 
  font: 12px Arial; 
}
</style>
<body>

<!-- load the plotly.js and math.js libraries -->      

<head>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://unpkg.com/mathjs@6.6.1/dist/math.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>



<body>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>

<form id="form1">
    <select class="countrydata" id = "countrydata_" multiple="multiple" style = "z-index1;">
    	<option value="cheese">Cheese</option>
    </select>
    <input type="button" id="btnget" value="Add Selected Countries" />
</form>





<script>




function unique ( array ) {
    return array.filter(function(a){
        return !this[a] ? this[a] = true : false;
    }, {});
}


function makeplot(countries = ["Kuwait"]) {
  Plotly.d3.csv("total_cases_per_million.csv", function(data){ processData(data, countries) } );
};


  
function processData(allRows, countries) {
  var dates = [];
  var total_count = [];
  var locations = []; 
  for (var i=0; i<allRows.length; i++) {
    row = allRows[i];
    dates.push( row['Date'] );
    total_count.push( row['Total confirmed cases per million (cases per million)'] );
    locations.push(row['Entity']);
  }
  //makePlotly( dates,total_count, locations);

  //create dropdown menu
  textArray = unique(locations);
  //var innerContainer = document.querySelector('[data-num="0"'),
 // plotEl = innerContainer.querySelector('.plot'),
   selector = document.querySelector('.countrydata');
   console.log(selector.length)


  // if(selector.length == 0 ){
    for (var i = 0; i < 5;  i++) {
        var currentOption = document.createElement('option');
        currentOption.text = textArray[i];
        currentOption.value = textArray[i];
        selector.appendChild(currentOption);
    };
  // }
  console.log(selector.length)
  console.log(selector)
}





makeplot(); 
 selector = document.querySelector('.countrydata');
 console.log(selector)



  $(document).ready(function() {
        $('#countrydata_').multiselect();
    });


  $(function() {

      $('#countrydata_').multiselect({
          includeSelectAllOption: true
      });

      $('#btnget').click(function(){

        //console.log($('#countrydata_').val())
        alert($('#countrydata_').val());
      });
  });






</script>






</body>







